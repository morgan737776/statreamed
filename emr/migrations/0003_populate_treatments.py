# Generated by Django 5.2.3 on 2025-06-19 08:07

from django.db import migrations

TREATMENT_ITEMS = [
    # --- Консультации специалистов ---
    {'name': 'Консультация врача-реабилитолога (первичная)', 'item_type': 'recommendation', 'description': 'Первичный осмотр, оценка реабилитационного потенциала, составление индивидуального плана реабилитации (ИПР).'},
    {'name': 'Консультация врача-реабилитолога (повторная)', 'item_type': 'recommendation', 'description': 'Динамическое наблюдение, коррекция плана реабилитации.'},
    {'name': 'Консультация невролога', 'item_type': 'recommendation', 'description': 'Диагностика и лечение заболеваний центральной и периферической нервной системы.'},
    {'name': 'Консультация кардиолога', 'item_type': 'recommendation', 'description': 'Диагностика и лечение сердечно-сосудистых заболеваний, оценка толерантности к нагрузкам.'},
    {'name': 'Консультация травматолога-ортопеда', 'item_type': 'recommendation', 'description': 'Диагностика и лечение последствий травм и заболеваний опорно-двигательного аппарата.'},
    {'name': 'Консультация врача ЛФК', 'item_type': 'recommendation', 'description': 'Подбор индивидуального комплекса лечебной физкультуры.'},
    {'name': 'Консультация физиотерапевта', 'item_type': 'recommendation', 'description': 'Назначение курса физиотерапевтических процедур.'},
    {'name': 'Консультация психотерапевта', 'item_type': 'recommendation', 'description': 'Диагностика и лечение психоэмоциональных расстройств.'},
    {'name': 'Консультация медицинского психолога', 'item_type': 'recommendation', 'description': 'Психодиагностика, нейропсихологическое тестирование, психологическое консультирование.'},
    {'name': 'Консультация логопеда-афазиолога', 'item_type': 'recommendation', 'description': 'Диагностика и коррекция нарушений речи, письма, чтения и глотания.'},
    {'name': 'Консультация эрготерапевта', 'item_type': 'recommendation', 'description': 'Оценка и восстановление бытовых навыков и самообслуживания.'},
    {'name': 'Консультация диетолога', 'item_type': 'recommendation', 'description': 'Разработка индивидуального плана лечебного питания.'},
    {'name': 'Консультация хирурга', 'item_type': 'recommendation', 'description': 'Оценка необходимости хирургического вмешательства, ведение послеоперационного периода.'},

    # --- Лабораторная диагностика ---
    {'name': 'Общий (клинический) анализ крови', 'item_type': 'procedure', 'description': 'ОАК с лейкоцитарной формулой и СОЭ.'},
    {'name': 'Биохимический анализ крови (базовый)', 'item_type': 'procedure', 'description': 'АЛТ, АСТ, билирубин, креатинин, мочевина, общий белок, глюкоза.'},
    {'name': 'Биохимический анализ крови (расширенный)', 'item_type': 'procedure', 'description': 'Включая липидный профиль, электролиты, ферменты.'},
    {'name': 'Коагулограмма', 'item_type': 'procedure', 'description': 'Оценка свертывающей системы крови (АЧТВ, МНО, протромбин, фибриноген).'},
    {'name': 'Анализ крови на D-димер', 'item_type': 'procedure', 'description': 'Маркер тромбообразования.'},
    {'name': 'Анализ крови на гормоны щитовидной железы', 'item_type': 'procedure', 'description': 'ТТГ, Т3, Т4.'},
    {'name': 'Общий анализ мочи', 'item_type': 'procedure', 'description': 'ОАМ с микроскопией осадка.'},

    # --- Инструментальная диагностика ---
    {'name': 'Электрокардиография (ЭКГ) в 12 отведениях', 'item_type': 'procedure', 'description': 'Регистрация электрической активности сердца в покое.'},
    {'name': 'Холтеровское мониторирование ЭКГ (24 часа)', 'item_type': 'procedure', 'description': 'Суточная запись ЭКГ для выявления нарушений ритма.'},
    {'name': 'Суточное мониторирование артериального давления (СМАД)', 'item_type': 'procedure', 'description': 'Автоматическое измерение АД в течение 24 часов.'},
    {'name': 'Эхокардиография (УЗИ сердца)', 'item_type': 'procedure', 'description': 'Оценка структуры и функции сердца.'},
    {'name': 'УЗДГ (допплерография) сосудов шеи и головного мозга', 'item_type': 'procedure', 'description': 'Исследование кровотока в брахиоцефальных артериях.'},
    {'name': 'УЗДГ сосудов верхних/нижних конечностей', 'item_type': 'procedure', 'description': 'Исследование артериального и венозного кровотока.'},
    {'name': 'УЗИ суставов (одна группа)', 'item_type': 'procedure', 'description': 'Ультразвуковое исследование плечевых, локтевых, коленных или тазобедренных суставов.'},
    {'name': 'УЗИ органов брюшной полости', 'item_type': 'procedure', 'description': 'Печень, желчный пузырь, поджелудочная железа, селезенка.'},
    {'name': 'Рентгенография суставов/позвоночника', 'item_type': 'procedure', 'description': 'Рентгенологическое исследование в 2-х проекциях.'},
    {'name': 'Компьютерная томография (КТ)', 'item_type': 'procedure', 'description': 'КТ головного мозга, позвоночника или других областей (по назначению).'},
    {'name': 'Магнитно-резонансная томография (МРТ)', 'item_type': 'procedure', 'description': 'МРТ головного мозга, позвоночника, суставов (по назначению).'},
    {'name': 'Спирометрия', 'item_type': 'procedure', 'description': 'Исследование функции внешнего дыхания.'},
    {'name': 'Электронейромиография (ЭНМГ)', 'item_type': 'procedure', 'description': 'Оценка функции периферических нервов и мышц.'},

    # --- Лечебная физкультура и кинезиотерапия ---
    {'name': 'Индивидуальное занятие ЛФК при заболеваниях ОДА', 'item_type': 'procedure', 'description': 'Занятие с инструктором-методистом ЛФК.'},
    {'name': 'Индивидуальное занятие ЛФК при неврологических заболеваниях', 'item_type': 'procedure', 'description': 'Специализированное занятие с нейрореабилитологом.'},
    {'name': 'Групповое занятие ЛФК', 'item_type': 'procedure', 'description': 'Тематические группы: "Здоровая спина", "Суставная гимнастика" и др.'},
    {'name': 'Механотерапия на реабилитационных тренажерах', 'item_type': 'procedure', 'description': 'Artromot, Kinetec, и др. пассивная/активная разработка суставов.'},
    {'name': 'Занятие на стабилоплатформе', 'item_type': 'procedure', 'description': 'Тренировка равновесия и координации.'},
    {'name': 'Кинезиотерапия по методике PNF', 'item_type': 'procedure', 'description': 'Проприоцептивная нейромышечная фасилитация.'},
    {'name': 'Бобат-терапия', 'item_type': 'procedure', 'description': 'Нейроразвивающая терапия для пациентов после инсультов, ЧМТ.'},
    {'name': 'Дыхательная гимнастика по Стрельниковой/Бутейко', 'item_type': 'procedure', 'description': 'Специализированные методики дыхательных упражнений.'},
    {'name': 'Гидрокинезотерапия (ЛФК в бассейне)', 'item_type': 'procedure', 'description': 'Индивидуальное или групповое занятие в лечебном бассейне.'},
    {'name': 'Скандинавская ходьба', 'item_type': 'procedure', 'description': 'Тренировка на открытом воздухе с инструктором.'},

    # --- Физиотерапия ---
    {'name': 'Магнитотерапия (общая/локальная)', 'item_type': 'procedure', 'description': 'Лечение переменным или постоянным магнитным полем.'},
    {'name': 'Лазеротерапия (включая ВЛОК, НЛОК)', 'item_type': 'procedure', 'description': 'Лечение низкоинтенсивным лазерным излучением.'},
    {'name': 'Электрофорез с лекарственными препаратами', 'item_type': 'procedure', 'description': 'Введение препаратов (Карипаин, Эуфиллин и др.) через кожу.'},
    {'name': 'Амплипульстерапия (СМТ-терапия)', 'item_type': 'procedure', 'description': 'Обезболивающее и противовоспалительное действие.'},
    {'name': 'Диадинамотерапия (ДДТ)', 'item_type': 'procedure', 'description': 'Лечение диадинамическими токами.'},
    {'name': 'Ультразвуковая терапия и фонофорез', 'item_type': 'procedure', 'description': 'Лечение ультразвуком, введение лекарств.'},
    {'name': 'УВЧ-терапия', 'item_type': 'procedure', 'description': 'Лечение электромагнитным полем ультравысокой частоты.'},
    {'name': 'Дарсонвализация', 'item_type': 'procedure', 'description': 'Воздействие импульсными переменными токами высокой частоты.'},
    {'name': 'Криотерапия (локальная)', 'item_type': 'procedure', 'description': 'Лечение холодом для снятия отека и воспаления.'},
    {'name': 'Баротерапия (барокамера)', 'item_type': 'procedure', 'description': 'Лечение в условиях повышенного давления кислорода.'},
    {'name': 'Грязелечение (пелоидотерапия)', 'item_type': 'procedure', 'description': 'Аппликации лечебной грязи.'},
    {'name': 'Водолечение (гидротерапия)', 'item_type': 'procedure', 'description': 'Лечебные ванны (хвойные, солевые, жемчужные), души (Шарко, циркулярный).'},
    {'name': 'Прессотерапия (лимфодренаж)', 'item_type': 'procedure', 'description': 'Аппаратный массаж для улучшения лимфотока и венозного оттока.'},

    # --- Массаж ---
    {'name': 'Медицинский массаж (1.5 ед - 15 мин)', 'item_type': 'procedure', 'description': 'Массаж одной области (воротниковая зона, поясничный отдел и т.д.).'},
    {'name': 'Медицинский массаж (общий, 60 мин)', 'item_type': 'procedure', 'description': 'Массаж всего тела.'},
    {'name': 'Лимфодренажный массаж (ручной)', 'item_type': 'procedure', 'description': 'Специальная техника для стимуляции лимфатической системы.'},
    {'name': 'Точечный массаж (шиацу)', 'item_type': 'procedure', 'description': 'Воздействие на биологически активные точки.'},

    # --- Психологическая, нейропсихологическая и логопедическая помощь ---
    {'name': 'Индивидуальное занятие с логопедом (восстановление речи)', 'item_type': 'procedure', 'description': 'Работа над артикуляцией, звукопроизношением, лексикой.'},
    {'name': 'Индивидуальное занятие с логопедом (восстановление глотания)', 'item_type': 'procedure', 'description': 'Тренировка мышц, участвующих в акте глотания.'},
    {'name': 'Нейропсихологическая диагностика', 'item_type': 'procedure', 'description': 'Оценка состояния высших психических функций (память, внимание, мышление).'},
    {'name': 'Нейропсихологическая коррекция (индивидуальная)', 'item_type': 'procedure', 'description': 'Занятия по восстановлению нарушенных функций.'},
    {'name': 'Индивидуальная психотерапия (когнитивно-поведенческая)', 'item_type': 'procedure', 'description': 'Работа с негативными мыслями, тревогой, депрессией.'},
    {'name': 'Арт-терапия (групповая)', 'item_type': 'procedure', 'description': 'Психотерапевтическая работа через творчество.'},
    {'name': 'Эрготерапия: восстановление бытовых навыков', 'item_type': 'procedure', 'description': 'Адаптация к повседневной жизни, тренировка самообслуживания.'},

    # --- Медикаментозное лечение (классы препаратов) ---
    {'name': 'НПВС (нестероидные противовоспалительные средства)', 'item_type': 'medication', 'description': 'Ибупрофен, Диклофенак, Нимесулид. Строго по назначению врача.'},
    {'name': 'Анальгетики центрального действия', 'item_type': 'medication', 'description': 'Трамадол. Строго по рецепту.'},
    {'name': 'Миорелаксанты', 'item_type': 'medication', 'description': 'Мидокалм, Сирдалуд, Баклофен. Для снятия мышечных спазмов.'},
    {'name': 'Ноотропы и нейропротекторы', 'item_type': 'medication', 'description': 'Церебролизин, Актовегин, Глицин, Пирацетам, Мексидол.'},
    {'name': 'Препараты для улучшения микроциркуляции', 'item_type': 'medication', 'description': 'Пентоксифиллин, Винпоцетин.'},
    {'name': 'Антикоагулянты и антиагреганты', 'item_type': 'medication', 'description': 'Варфарин, Ксарелто, Аспирин Кардио, Клопидогрел.'},
    {'name': 'Хондропротекторы', 'item_type': 'medication', 'description': 'Структум, Дона, Алфлутоп. Курсовой прием.'},
    {'name': 'Витамины группы B (нейротропные)', 'item_type': 'medication', 'description': 'Мильгамма, Нейромультивит.'},
    {'name': 'Седативные препараты и антидепрессанты', 'item_type': 'medication', 'description': 'СИОЗС, анксиолитики. Строго по назначению психотерапевта.'},

    # --- Рекомендации и режим ---
    {'name': 'Соблюдение диеты (Стол №9)', 'item_type': 'recommendation', 'description': 'Диета при сахарном диабете.'},
    {'name': 'Соблюдение диеты (Стол №10)', 'item_type': 'recommendation', 'description': 'Диета при сердечно-сосудистых заболеваниях.'},
    {'name': 'Ортопедический режим', 'item_type': 'recommendation', 'description': 'Рекомендации по двигательной активности, исключение осевых нагрузок.'},
    {'name': 'Ношение ортопедического корсета/ортеза', 'item_type': 'recommendation', 'description': 'Фиксация и поддержка пораженного отдела.'},
]

def populate_treatment_items(apps, schema_editor):
    TreatmentItem = apps.get_model('emr', 'TreatmentItem')
    db_alias = schema_editor.connection.alias

    items_to_create = []
    for item_data in TREATMENT_ITEMS:
        items_to_create.append(TreatmentItem(**item_data))
    
    TreatmentItem.objects.using(db_alias).bulk_create(items_to_create)

def unpopulate_treatment_items(apps, schema_editor):
    TreatmentItem = apps.get_model('emr', 'TreatmentItem')
    db_alias = schema_editor.connection.alias
    
    names_to_delete = [item['name'] for item in TREATMENT_ITEMS]
    TreatmentItem.objects.using(db_alias).filter(name__in=names_to_delete).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('emr', '0002_treatmentitem_remove_prescription_title_and_more'),
    ]

    operations = [
        migrations.RunPython(populate_treatment_items, reverse_code=unpopulate_treatment_items),
    ]
